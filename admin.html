<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Admin Dashboard</title>

<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js"></script>

<style>
body{font-family:sans-serif;background:#f4f6f9;padding:20px;}
.card{background:white;margin:10px 0;padding:12px;border-radius:10px;}
button{padding:6px 10px;border:none;border-radius:6px;background:#0f9d58;color:white;}
.delete{background:red;}
</style>
</head>
<body>

<h2>Pending Spots</h2>
<div id="pending"></div>

<h2>Approved Spots</h2>
<div id="approved"></div>

<script>

const firebaseConfig={
apiKey:"AIzaSyDnCP_Dc3ok6liqzK6j5BAgs0jKfr600Kc",
authDomain:"biryani-khoje-amra.firebaseapp.com",
databaseURL:"https://biryani-khoje-amra-default-rtdb.asia-southeast1.firebasedatabase.app/",
projectId:"biryani-khoje-amra"
};

firebase.initializeApp(firebaseConfig);
const db=firebase.database();

db.ref("spots/pending").on("value",snap=>{
const data=snap.val();
pending.innerHTML="";
for(let key in data){
let spot=data[key];
pending.innerHTML+=`
<div class="card">
${spot.name}
<button onclick="approve('${key}')">Approve</button>
</div>`;
}
});

db.ref("spots/approved").on("value",snap=>{
const data=snap.val();
approved.innerHTML="";
for(let key in data){
let spot=data[key];
approved.innerHTML+=`
<div class="card">
${spot.name}
<button class="delete" onclick="remove('${key}')">Delete</button>
</div>`;
}
});

function approve(id){
db.ref("spots/pending/"+id).once("value",snap=>{
let spot=snap.val();
spot.trueCount=0;
spot.fakeCount=0;
db.ref("spots/approved").push(spot);
db.ref("spots/pending/"+id).remove();
});
}

function remove(id){
db.ref("spots/approved/"+id).remove();
}

</script>
</body>
</html>